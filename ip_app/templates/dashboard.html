{% extends "test69.html" %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-2">
    <div class="btn-toolbar dropdown">
        <button class="btn btn-dark btn-sm me-2 dropdown-toggle"  id="dropdownMenuButton"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="fas fa-plus me-2"></span>New Project
        </button>
        <div class="dropdown-menu dashboard-dropdown dropdown-menu-start mt-2 py-0" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item fw-normal rounded-top" href="{{ url_for('new_project') }}"><span class="fas fa-tasks"></span>New Task</a>
            <div role="separator" class="dropdown-divider my-0"></div>
            <a class="dropdown-item fw-normal rounded-bottom" href="#"><span class="fas fa-rocket text-danger"></span>FUTURE DATA SHIT idk like graphs?</a>
        </div>
    </div>
    </div>

<!-- When this page is first loaded, no projects may exist, ensure there is no 500 response with if -->
{% if project_list %}
    <!-- cheap hack, make it so title displays once in an empty card -->
<div class = "card">
    <h5 class = "card-header"> Projects </h5>
</div>
<!-- run simple loop, make cards-->
{% for project in project_list %}
<div class="card">
  <div class="card-body">

      <a href={{url_for('show_tasks_for_project', project_name=project.project_name) }}> <h5 class="card-title"> {{ project.project_name }}</h5> </a>
      <p class="card-text"> Description: {{ project.project_desc }} </p>
      
     <p class="card-text"><small class="text-success">Num Members: {{ project.num_members }}, 
                                                                 Num Tasks: {{ project.num_tasks }} </small></p>


    <!-- The progress bar somewhat cockeyed but thats okay because im very accepting-->
    <div class="col-12 col-lg-8">
              <div class="progress-wrapper">
                  <div class="progress mb-0">
                      <div class="progress-bar bg-success" role="progressbar" style="width: 85%" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
              </div>
          </div>
              
        <!-- Delete icon on the bottom right-->
          <a href={{url_for('delete_project', project_name=project.project_name)}} class="btn btn-icon-only float-right text-danger"
            onclick = "{if (confirm ( 'Are you sure you want to delete {{project.project_name}}?')) {this.document.formname.submit(); return true;} return false;}">

                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-square" viewBox="0 0 16 16">
                  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                </svg>
          </a>
          
      <div class="card-footer border-top border-gray-300 text-muted">
        Last Updated: 2 days ago
    </div>
        
  </div>
    </div>
    
{% endfor %}
    
{% endif %}

{% endblock %}